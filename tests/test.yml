---
- hosts: all
  remote_user: root

  pre_tasks:
    - name: create test users
      become: yes
      user:
        name: '{{ item }}'
        state: present
        home: '/home/{{ item }}'
        createhome: yes
      with_items:
        - test_usr
        - test_usr2
        - test_usr3

  roles:
    - role: gantsign.visual-studio-code

    - role: ansible-role-visual-studio-code-extensions
      users:
        - username: test_usr
          visual_studio_code_extensions:
            - donjayamanne.python
            - wholroyd.jinja
        - username: test_usr2
          visual_studio_code_extensions: []
        - username: test_usr3
